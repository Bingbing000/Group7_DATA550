"ASTHMA", "INMSUPR", "HIPERTENSION", "CARDIOVASCULAR",
"RENAL_CHRONIC", "OTHER_DISEASE", "OBESITY", "TOBACCO") %>%
filter(AGE != "Unknown",
PNEUMONIA != "Unknown",
DIABETES != "Unknown",
COPD != "Unknown",
ASTHMA != "Unknown",
INMSUPR != "Unknown",
HIPERTENSION != "Unknown",
CARDIOVASCULAR != "Unknown",
RENAL_CHRONIC != "Unknown",
OTHER_DISEASE != "Unknown",
OBESITY != "Unknown",
TOBACCO != "Unknown") %>%
tbl_summary(by = SEX) %>%
add_overall() %>%
add_p()
#Save output
saveRDS(
table_one,
file = here::here("output/table_YingXu.rds")
)
table_one
library(tidyverse)
here::i_am("code/02_Bingbing_graph.R")
data <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
# Convert categorical columns to factors
data <- data %>%
mutate_at(vars(USMER, SEX, PATIENT_TYPE, INTUBED, PNEUMONIA, PREGNANT, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU), factor)
# Handling missing values: For simplicity, we'll convert NAs in binary columns to "Unknown"
binary_columns <- c("INTUBED", "PNEUMONIA", "PREGNANT", "DIABETES", "COPD", "ASTHMA", "INMSUPR", "HIPERTENSION", "OTHER_DISEASE", "CARDIOVASCULAR", "OBESITY", "RENAL_CHRONIC", "TOBACCO", "ICU")
data[binary_columns] <- lapply(data[binary_columns], function(x) addNA(x, ifany = TRUE))
# Assuming 'DATE_DIED' is NA for patients who didn't die, creating a binary outcome variable for mortality
data$DIED <- ifelse(is.na(data$DATE_DIED), "No", "Yes")
# Create a subset of data focusing on patient outcomes and conditions
analysis_data <- data %>%
select(SEX, AGE, PATIENT_TYPE, DIED, INTUBED, PNEUMONIA, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU)
# Creating a graph to analyze treatment outcomes and healthcare utilization
# Grouping age into categories
analysis_data$AGE_GROUP <- cut(analysis_data$AGE, breaks = c(0, 18, 40, 60, 80, Inf), labels = c("0-18", "19-40", "41-60", "61-80", "81+"), right = FALSE)
# Calculating mortality rate by age group and any pre-existing condition
mortality_rate <- analysis_data %>%
mutate(ANY_CONDITION = ifelse(DIABETES == "Yes" | COPD == "Yes" | ASTHMA == "Yes" | INMSUPR == "Yes" | HIPERTENSION == "Yes" | OTHER_DISEASE == "Yes" | CARDIOVASCULAR == "Yes" | OBESITY == "Yes" | RENAL_CHRONIC == "Yes" | TOBACCO == "Yes", "Yes", "No")) %>%
group_by(AGE_GROUP, ANY_CONDITION) %>%
summarise(Mortality_Rate = mean(DIED == "Yes"), .groups = 'drop')
# Plotting
bar_graph <- ggplot(mortality_rate, aes(x = AGE_GROUP, y = Mortality_Rate, fill = ANY_CONDITION)) +
geom_bar(stat = "identity", position = "dodge") +
theme_minimal() +
labs(title = "COVID-19 Mortality Rate by Age Group and Pre-existing Condition",
x = "Age Group",
y = "Mortality Rate",
fill = "Pre-existing Condition")
saveRDS(
bar_graph,
file = here::here("output/Bingbing_graph.rds")
)
bar_graph
# Here
here::i_am("code/03_Jack_analysis_graph.R")
# Load packages
library(tidyverse)
library(broom)
# Read in Data
data <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
# Conver DATE_DIED to binary Death Outcome
data$Death <- ifelse(is.na(data$DATE_DIED), 0, 1)
# Convert categorical variables to factors
data <- data %>%
mutate_at(vars(USMER, SEX, PATIENT_TYPE, INTUBED, PNEUMONIA, PREGNANT, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU), factor)
model <- glm(Death ~ SEX + AGE + DIABETES + COPD + ASTHMA + INMSUPR + HIPERTENSION + CARDIOVASCULAR + OBESITY + RENAL_CHRONIC + TOBACCO,
data = data,
family = "binomial")
summary(model)
# Get odds ratios and their confidence intervals
odds_ratios <- tidy(model, exponentiate = TRUE, conf.int = TRUE) %>%
filter(term != "(Intercept)")
odds_ratios <- odds_ratios %>%
mutate(term = case_when(
term == "TOBACCOYes" ~ "Tobacco Smoker",
term == "SEXmale" ~ "Male",
term == "RENAL_CHRONICYes" ~ "Chronic Renal Disease",
term == "OBESITYYes" ~ "Obesity",
term == "INMSUPRYes" ~ "Immunosuppressed",
term == "HIPERTENSIONYes" ~ "Hypertension",
term == "DIABETESYes" ~ "Diabetes",
term == "CARDIOVASCULARYes" ~ "Cardiovascular Disease",
term == "ASTHMAYes" ~ "Asthmatic",
term == "COPDYes" ~ "COPD",
TRUE ~ term
)) %>%
arrange(desc(term))
# Plotting
or_graph <- ggplot(odds_ratios, aes(x = term, y = estimate)) +
geom_point() +
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width = 0.2) +
coord_flip() +
geom_hline(yintercept = 1, linetype = "dashed", color = "red") +
xlab("Predictor") +
ylab("Odds Ratio") +
ggtitle("Odds Ratios of Risk Factors for Dying of COVID") +
theme_minimal()
saveRDS(
or_graph,
file = here::here("output/Jack_graph.rds")
)
Or_graph
or_graph
library(tidyverse)
here::i_am("code/02_Bingbing_graph.R")
data <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
# Convert categorical columns to factors
data <- data %>%
mutate_at(vars(USMER, SEX, PATIENT_TYPE, INTUBED, PNEUMONIA, PREGNANT, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU), factor)
# Handling missing values: For simplicity, we'll convert NAs in binary columns to "Unknown"
binary_columns <- c("INTUBED", "PNEUMONIA", "PREGNANT", "DIABETES", "COPD", "ASTHMA", "INMSUPR", "HIPERTENSION", "OTHER_DISEASE", "CARDIOVASCULAR", "OBESITY", "RENAL_CHRONIC", "TOBACCO", "ICU")
data[binary_columns] <- lapply(data[binary_columns], function(x) addNA(x, ifany = TRUE))
# Assuming 'DATE_DIED' is NA for patients who didn't die, creating a binary outcome variable for mortality
data$DIED <- ifelse(is.na(data$DATE_DIED), "No", "Yes")
# Create a subset of data focusing on patient outcomes and conditions
analysis_data <- data %>%
select(SEX, AGE, PATIENT_TYPE, DIED, INTUBED, PNEUMONIA, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU)
# Creating a graph to analyze treatment outcomes and healthcare utilization
# Grouping age into categories
analysis_data$AGE_GROUP <- cut(analysis_data$AGE, breaks = c(0, 18, 40, 60, 80, Inf), labels = c("0-18", "19-40", "41-60", "61-80", "81+"), right = FALSE)
# Calculating mortality rate by age group and any pre-existing condition
mortality_rate <- analysis_data %>%
mutate(ANY_CONDITION = ifelse(DIABETES == "Yes" | COPD == "Yes" | ASTHMA == "Yes" | INMSUPR == "Yes" | HIPERTENSION == "Yes" | OTHER_DISEASE == "Yes" | CARDIOVASCULAR == "Yes" | OBESITY == "Yes" | RENAL_CHRONIC == "Yes" | TOBACCO == "Yes", "Yes", "No")) %>%
group_by(AGE_GROUP, ANY_CONDITION) %>%
summarise(Mortality_Rate = mean(DIED == "Yes"), .groups = 'drop')
# Plotting
bar_graph <- ggplot(mortality_rate, aes(x = AGE_GROUP, y = Mortality_Rate, fill = ANY_CONDITION)) +
geom_bar(stat = "identity", position = "dodge") +
theme_minimal() +
labs(title = "COVID-19 Mortality Rate by Age Group and Pre-existing Condition",
x = "Age Group",
y = "Mortality Rate",
fill = "Pre-existing Condition")
saveRDS(
bar_graph,
file = here::here("output/Bingbing_graph.rds")
)
resp_or
resp_or
here::i_am("code/04_respiratory.R")
here::i_am("code/04_Seana_respiratory.R")
data <- readRDS(
file=here::here("data_custom/data_custom.rds")
)
pacman::p_load(dplyr,sjPlot,sjlabelled,sjmisc,ggplot2)
data <- data %>%
filter(!is.na(ICU)) %>%
mutate(ICU=case_when(ICU=="No"~0,
TRUE~1)) %>%
mutate(PRE=case_when(DIABETES=="Yes" | INMSUPR=="Yes" | HIPERTENSION=="Yes" |
OTHER_DISEASE=="Yes" | CARDIOVASCULAR=="Yes" |
OBESITY=="Yes" | RENAL_CHRONIC=="Yes"~1,
TRUE~0)) %>%
mutate(SEX=case_when(SEX=="male"~0,
SEX=="female"~1,
TRUE~NA)) %>%
mutate(TOBACCO=case_when(TOBACCO=="No"~0,
TOBACCO=="Yes"~1,
TRUE~NA)) %>%
mutate(resp_cond=case_when(PNEUMONIA=="Yes"~1,
COPD=="Yes"~2,
ASTHMA=="Yes"~3,
TRUE~0)) %>%
select(SEX,AGE,resp_cond,TOBACCO,ICU,PRE)
set_label(data$ICU) <- "ICU Admission"
set_label(data$SEX) <- "Female"
set_label(data$AGE) <- "Age"
set_label(data$TOBACCO) <- "Tobacco User"
set_label(data$PRE) <- "Pre-Existing Conditions"
data$resp_cond <- factor(data$resp_cond, labels=c("None","Pneumonia","COPD","Asthma"))
log_reg_resp <- glm(ICU ~ resp_cond + SEX + AGE + TOBACCO + PRE,
family = binomial (link = 'logit'),
data = data)
resp_or <- plot_model(log_reg_resp, rm.terms = c("SEX", "AGE", "TOBACCO", "PRE")) +
theme_bw() +
labs(title="Odds of ICU Admission by Respiratory Condition",
subtitle = "After Controlling for Sex, Age, Tobacco Use, and Pre-Existing Conditions")
ggsave(
here::here("output/resp_or.png"),
plot=resp_or,
device="png",
width = 6,
height = 4
)
resp_or
---
title: "The analysis of covid-19 in Mexico"
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config = WHICH_CONFIG
)
library(knitr)
opts_chunk$set(
echo = FALSE, warning = FALSE, message = FALSE
)
here::i_am("report.Rmd")
data <- readRDS(
file=here::here("output/data_custom.rds")
)
table_one <- readRDS(file = here::here("output/table_YingXu.rds"))
table_one
graph1 <- readRDS(file = here::here("output/Bingbing_graph.rds"))
graph1
graph2 <- readRDS(file = here::here("output/Jack_graph.rds"))
graph2
knitr::include_graphics(
here::here("output/resp_or.png")
)
here::i_am("code/00_custom_code.R")
absolute_path_to_data <- here::here("data_raw/covid_sub.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
#make categorical age variable (below or above 55)
data$age_cat <- ifelse(is.na(data$AGE),NA,
ifelse(data$AGE>=55,1,0))
#filter based on config
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
config_list
WHICH_CONFIG
here::i_am("code/00_custom_code.R")
absolute_path_to_data <- here::here("data_raw/covid_sub.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
#make categorical age variable (below or above 55)
data$age_cat <- ifelse(is.na(data$AGE),NA,
ifelse(data$AGE>=55,1,0))
#filter based on config
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
#filter based on age category
if (config_list$whole_dataset==FALSE){
data <- data[data$age_cat == 1, ]
}
#save data
saveRDS(
data, file=here::here("data_custom/data_custom.rds")
)
absolute_path_to_data <- here::here("data_raw/covid_sub.csv")
if (config_list$whole_dataset==FALSE){
data <- data[data$age_cat == 1, ]
}
#filter based on config
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
#filter based on age category
if (config_list$whole_dataset==FALSE){
data <- data[data$age_cat == 1, ]
}
nrow(data)
WHICH_CONFIG
config_list
here::i_am("code/00_custom_code.R")
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
config_list
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
WHICH_CONFIG
Sys.getenv("WHICH_CONFIG")
library(config)
?Sys.getenv
Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
config_list
config::get())
config::get()
config::get()
config::get()
Sys.getenv("WHICH_CONFIG")
here::i_am("code/00_custom_code.R")
absolute_path_to_data <- here::here("data_raw/covid_sub.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
#make categorical age variable (below or above 55)
data$age_cat <- ifelse(is.na(data$AGE),NA,
ifelse(data$AGE>=55,1,0))
#filter based on config
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
#filter based on age category
if (config_list$whole_dataset==FALSE){
data <- data[data$age_cat == 1, ]
}
#save data
saveRDS(
data, file=here::here("data_custom/data_custom.rds")
)
here::i_am("code/00_custom_code.R")
absolute_path_to_data <- here::here("data_raw/covid_sub.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
#make categorical age variable (below or above 55)
data$age_cat <- ifelse(is.na(data$AGE),NA,
ifelse(data$AGE>=55,1,0))
#filter based on config
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config=WHICH_CONFIG
)
#filter based on age category
if (config_list$whole_dataset==FALSE){
data <- data[data$age_cat == 1, ]
}
#save data
saveRDS(
data, file=here::here("data_custom/data_custom.rds")
)
data <- read.csv(absolute_path_to_data, header = TRUE)
data_custom <- readRDS("C:/Users/sleep/OneDrive - Emory University/2024 Spring/DATA 550/midproject/data_custom/data_custom.rds")
data_custom <- readRDS("C:/Users/sleep/OneDrive - Emory University/2024 Spring/DATA 550/midproject/data_custom/data_custom.rds")
WHICH_CONFIG
#Here
here::i_am("code/01_table_YingXu.R")
#Read data
library(tidyverse)
covid_sub <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
#Construct table
library(gtsummary)
library(labelled)
var_label(covid_sub) <- list(
AGE = "Patient Age",
PATIENT_TYPE = "Patient Type",
PNEUMONIA = "Pneumonia",
DIABETES = "Diabetes",
ASTHMA = "Asthma",
INMSUPR = "Immunosuppressed",
HIPERTENSION = "Hypertension",
CARDIOVASCULAR = "Heart/blood vessels related disease",
RENAL_CHRONIC = "Chronic renal disease",
OTHER_DISEASE = "Other disease",
OBESITY = "Obese",
TOBACCO = "Tobacco user"
)
table_one <- covid_sub %>%
select("SEX", "AGE", "PATIENT_TYPE", "PNEUMONIA", "DIABETES", "COPD",
"ASTHMA", "INMSUPR", "HIPERTENSION", "CARDIOVASCULAR",
"RENAL_CHRONIC", "OTHER_DISEASE", "OBESITY", "TOBACCO") %>%
filter(AGE != "Unknown",
PNEUMONIA != "Unknown",
DIABETES != "Unknown",
COPD != "Unknown",
ASTHMA != "Unknown",
INMSUPR != "Unknown",
HIPERTENSION != "Unknown",
CARDIOVASCULAR != "Unknown",
RENAL_CHRONIC != "Unknown",
OTHER_DISEASE != "Unknown",
OBESITY != "Unknown",
TOBACCO != "Unknown") %>%
tbl_summary(by = SEX) %>%
add_overall() %>%
add_p()
#Save output
saveRDS(
table_one,
file = here::here("output/table_YingXu.rds")
)
library(tidyverse)
here::i_am("code/02_Bingbing_graph.R")
data <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
# Convert categorical columns to factors
data <- data %>%
mutate_at(vars(USMER, SEX, PATIENT_TYPE, INTUBED, PNEUMONIA, PREGNANT, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU), factor)
# Handling missing values: For simplicity, we'll convert NAs in binary columns to "Unknown"
binary_columns <- c("INTUBED", "PNEUMONIA", "PREGNANT", "DIABETES", "COPD", "ASTHMA", "INMSUPR", "HIPERTENSION", "OTHER_DISEASE", "CARDIOVASCULAR", "OBESITY", "RENAL_CHRONIC", "TOBACCO", "ICU")
data[binary_columns] <- lapply(data[binary_columns], function(x) addNA(x, ifany = TRUE))
# Assuming 'DATE_DIED' is NA for patients who didn't die, creating a binary outcome variable for mortality
data$DIED <- ifelse(is.na(data$DATE_DIED), "No", "Yes")
# Create a subset of data focusing on patient outcomes and conditions
analysis_data <- data %>%
select(SEX, AGE, PATIENT_TYPE, DIED, INTUBED, PNEUMONIA, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU)
# Creating a graph to analyze treatment outcomes and healthcare utilization
# Grouping age into categories
analysis_data$AGE_GROUP <- cut(analysis_data$AGE, breaks = c(0, 18, 40, 60, 80, Inf), labels = c("0-18", "19-40", "41-60", "61-80", "81+"), right = FALSE)
# Calculating mortality rate by age group and any pre-existing condition
mortality_rate <- analysis_data %>%
mutate(ANY_CONDITION = ifelse(DIABETES == "Yes" | COPD == "Yes" | ASTHMA == "Yes" | INMSUPR == "Yes" | HIPERTENSION == "Yes" | OTHER_DISEASE == "Yes" | CARDIOVASCULAR == "Yes" | OBESITY == "Yes" | RENAL_CHRONIC == "Yes" | TOBACCO == "Yes", "Yes", "No")) %>%
group_by(AGE_GROUP, ANY_CONDITION) %>%
summarise(Mortality_Rate = mean(DIED == "Yes"), .groups = 'drop')
# Plotting
bar_graph <- ggplot(mortality_rate, aes(x = AGE_GROUP, y = Mortality_Rate, fill = ANY_CONDITION)) +
geom_bar(stat = "identity", position = "dodge") +
theme_minimal() +
labs(title = "COVID-19 Mortality Rate by Age Group and Pre-existing Condition",
x = "Age Group",
y = "Mortality Rate",
fill = "Pre-existing Condition")
saveRDS(
bar_graph,
file = here::here("output/Bingbing_graph.rds")
)
# Here
here::i_am("code/03_Jack_analysis_graph.R")
# Load packages
library(tidyverse)
library(broom)
# Read in Data
data <- readRDS(
data, file=here::here("data_custom/data_custom.rds")
)
# Conver DATE_DIED to binary Death Outcome
data$Death <- ifelse(is.na(data$DATE_DIED), 0, 1)
# Convert categorical variables to factors
data <- data %>%
mutate_at(vars(USMER, SEX, PATIENT_TYPE, INTUBED, PNEUMONIA, PREGNANT, DIABETES, COPD, ASTHMA, INMSUPR, HIPERTENSION, OTHER_DISEASE, CARDIOVASCULAR, OBESITY, RENAL_CHRONIC, TOBACCO, ICU), factor)
model <- glm(Death ~ SEX + AGE + DIABETES + COPD + ASTHMA + INMSUPR + HIPERTENSION + CARDIOVASCULAR + OBESITY + RENAL_CHRONIC + TOBACCO,
data = data,
family = "binomial")
summary(model)
# Get odds ratios and their confidence intervals
odds_ratios <- tidy(model, exponentiate = TRUE, conf.int = TRUE) %>%
filter(term != "(Intercept)")
odds_ratios <- odds_ratios %>%
mutate(term = case_when(
term == "TOBACCOYes" ~ "Tobacco Smoker",
term == "SEXmale" ~ "Male",
term == "RENAL_CHRONICYes" ~ "Chronic Renal Disease",
term == "OBESITYYes" ~ "Obesity",
term == "INMSUPRYes" ~ "Immunosuppressed",
term == "HIPERTENSIONYes" ~ "Hypertension",
term == "DIABETESYes" ~ "Diabetes",
term == "CARDIOVASCULARYes" ~ "Cardiovascular Disease",
term == "ASTHMAYes" ~ "Asthmatic",
term == "COPDYes" ~ "COPD",
TRUE ~ term
)) %>%
arrange(desc(term))
# Plotting
or_graph <- ggplot(odds_ratios, aes(x = term, y = estimate)) +
geom_point() +
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width = 0.2) +
coord_flip() +
geom_hline(yintercept = 1, linetype = "dashed", color = "red") +
xlab("Predictor") +
ylab("Odds Ratio") +
ggtitle("Odds Ratios of Risk Factors for Dying of COVID") +
theme_minimal()
saveRDS(
or_graph,
file = here::here("output/Jack_graph.rds")
)
here::i_am("code/04_Seana_respiratory.R")
data <- readRDS(
file=here::here("data_custom/data_custom.rds")
)
pacman::p_load(dplyr,sjPlot,sjlabelled,sjmisc,ggplot2)
data <- data %>%
filter(!is.na(ICU)) %>%
mutate(ICU=case_when(ICU=="No"~0,
TRUE~1)) %>%
mutate(PRE=case_when(DIABETES=="Yes" | INMSUPR=="Yes" | HIPERTENSION=="Yes" |
OTHER_DISEASE=="Yes" | CARDIOVASCULAR=="Yes" |
OBESITY=="Yes" | RENAL_CHRONIC=="Yes"~1,
TRUE~0)) %>%
mutate(SEX=case_when(SEX=="male"~0,
SEX=="female"~1,
TRUE~NA)) %>%
mutate(TOBACCO=case_when(TOBACCO=="No"~0,
TOBACCO=="Yes"~1,
TRUE~NA)) %>%
mutate(resp_cond=case_when(PNEUMONIA=="Yes"~1,
COPD=="Yes"~2,
ASTHMA=="Yes"~3,
TRUE~0)) %>%
select(SEX,AGE,resp_cond,TOBACCO,ICU,PRE)
set_label(data$ICU) <- "ICU Admission"
set_label(data$SEX) <- "Female"
set_label(data$AGE) <- "Age"
set_label(data$TOBACCO) <- "Tobacco User"
set_label(data$PRE) <- "Pre-Existing Conditions"
data$resp_cond <- factor(data$resp_cond, labels=c("None","Pneumonia","COPD","Asthma"))
log_reg_resp <- glm(ICU ~ resp_cond + SEX + AGE + TOBACCO + PRE,
family = binomial (link = 'logit'),
data = data)
resp_or <- plot_model(log_reg_resp, rm.terms = c("SEX", "AGE", "TOBACCO", "PRE")) +
theme_bw() +
labs(title="Odds of ICU Admission by Respiratory Condition",
subtitle = "After Controlling for Sex, Age, Tobacco Use, and Pre-Existing Conditions")
ggsave(
here::here("output/resp_or.png"),
plot=resp_or,
device="png",
width = 6,
height = 4
)
install.packages('renv')
Sys.getenv(WHICH_CONFIG)
Sys.getenv('WHICH_CONFIG')
.libPaths()
